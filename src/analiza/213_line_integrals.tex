\subsubsection{Całka krzywoliniowa nieskierowana}
\begin{definition}
    Łuk gładki to taka krzywa
    \[ K = \{(x(t), y(t)) : t \in [\alpha, \beta]\}, \]
    że funkcje $x(t), y(t)$ są różniczkowalne w sposób ciągły oraz dla każdego $t \in [\alpha, \beta]$ zachodzi
    \[ (x'(t))^2 + (y'(t))^2 > 0. \]
\end{definition}

\begin{definition}
    Krzywa regularna to krzywa będąca sumą skończonej liczby łuków gładkich.
\end{definition}

Całkę funkcji $f$ po łuku gładkim $L$ definiujemy podobnie jak zwykłą całkę (tworzymy ciąg przedziałów i badamy granicę sumy iloczynów wartości funkcji i długości przedziałów przy dążącej do zera średnicy przedziałów). Jeśli krzywa $L$ jest zamknięta (czyli jej początek pokrywa się z końcem) używamy symbolu $\oint$.

\begin{theorem}
    Jeśli $f$ jest funkcją ciągłą, a $L$ jest łukiem gładkim, to
    \[ \int\limits_L f(x, y) \d l = \int\limits_\alpha^\beta f(x(t), y(t))\sqrt{(x'(t))^2 + (y'(t))^2} \d t. \]
\end{theorem}

Jeśli łuk nie jest zadany parametrycznie, a jawnie, to wzór z powyższego twierdzenie ma postać
\[ \int\limits_L f(x, y) \d l = \int\limits_\alpha^\beta f(x, y(x))\sqrt{1 + (y'(x))^2} \d x. \]
Podobnie definiuje się łuk gładki w $\RR^3$; można również wyprowadzić wzory dla całek krzywoliniowych funkcji trzech zmiennych.

\subsubsection{Całka krzywoliniowa skierowana}
Jeśli krzywa $L$ jest łukiem gładkim, to możemy zdefiniować \vocab{pole wektorowe} $\vec{F} : L \to \RR^2$, gdzie
\[ \vec{F}(x, y) = (P(x, y), Q(x, y)). \]
Wtedy \vocab{całkę krzywoliniową skierowaną} oznaczamy
\[ \int\limits_L \vec{F} \circ \d{\vec{r}} = \int\limits_L P(x, y) \d x + Q(x, y) \d y. \]
Zachodzi również (dosyć łatwa do uzasadnienia) równość:

\begin{theorem}
    \label{t:line integral}
    Jeśli $\vec{F} = (P, Q)$ jest polem wektorowym, w którym funkcje $P, Q$  są ciągłe, a $L$ jest łukiem gładkim, to
    \[ \int\limits_L P(x, y) \d x + Q(x, y) \d y = \int\limits_\alpha^\beta \left(P(x(t), y(t))\cdot x'(t) + Q(x(t), y(t))\cdot y'(t)\right) \d t. \]
\end{theorem}

Znów, analogiczne wzory istnieją dla całek krzywoliniowych skierowanych dla funkcji trzech zmiennych.

Mówimy, że zadana parametrycznie krzywa regularna $K$ ma \vocab{orientację przeciwną} do krzywej $-K$, jeśli obrazy ich parametryzacji są równe (to znaczy, że krzywe nieskierowane są identyczne), ale zmieniając parametr $t$ w dwóch danych równaniach ,,poruszamy się'' w przeciwne strony.

\begin{fact}
    \label{f:opposite orientation of a curve}
    Zachodzi równość
    \[ \int\limits_{-K} P \d x + Q \d y = -\int\limits_K P \d x + Q \d y. \]
\end{fact}

\begin{definition}
    Krzywa Jordana to zamknięta krzywa, której parametryzacja jest różnowartościowa (to znaczy, że nie ma punktów wielokrotnych) z wyjątkiem punktu początkowego / końcowego.
\end{definition}

\begin{definition}
    Obszar jednospójny $D$ to taki obszar, że wnętrze każdej krzywej Jordana zawartej w $D$ zawiera się w $D$.
\end{definition}

Brzeg ograniczonego obszaru jednospójnego $D$ oznaczamy przez $\p D$. Mówimy, że jest on \vocab{zorientowany dodatnio}, jeśli poruszając się po tym brzegu zgodnie z wybraną orientacją (to znaczy przy rosnącym parametrze $t$) obszar $D$ znajduje się po lewej stronie.

\begin{theorem}[Greena]
    \label{t:Green}
    Niech $D$ będzie ograniczonym obszarem jednospójnym, a $\vec{F} = (P, Q)$ polem wektorowym, gdzie funkcje $P, Q$ są różniczkowalne w sposób ciągły wewnątrz obszaru $D$, a $\p D$ jest zorientowany dodatnio. Zachodzi równość
    \[ \oint\limits_{\p D} P(x, y) \d x + Q(x, y) \d y = \iint\limits_D \left(\frac{\p Q}{\p x}(x, y) - \frac{\p P}{\p y}(x, y)\right) \d x \d y. \]
\end{theorem}

\begin{example}
    Oblicz
    \[ \oint\limits_C xy^2 \d x + 2x^2y \d y, \]
    gdzie $C$ to dodatnio zorientowany brzeg trójkąta o wierzchołkach $(0, 0), (2, 2)$ i $(2, 4)$.
\end{example}
\begin{solution}
    Oczywiście moglibyśmy rozpisać trzy całki (dla każdego boku), ale łatwiej będzie skorzystać z twierdzenia Greena (\ref{t:Green}):
    \begin{align*}
        I &= \oint\limits_C xy^2 \d x + 2x^2y \d y = \iint\limits_D \frac{\p{}}{\p x}(2x^2y) - \frac{\p{}}{\p y}(xy^2) \d x \d y = \\
        &= \iint\limits_D 4xy - 2xy \d x \d y = \iint\limits_D 2xy \d x \d y,
    \end{align*}
    gdzie $D$ jest zadanym trójkątem, więc $D = \{(x, y) : x \in [0, 2], y \in [x, 2x]\}$.
    \begin{center}
        \begin{tikzpicture}[scale=0.7]
            \tkzInit[xmin=-.5,ymin=-.5,xmax=3,ymax=4.5]
            \tkzGrid
            \tkzDrawX
            \tkzDrawY
            \tkzDefPoints{0/0/A, 2/2/B, 2/4/C}
            \tkzDrawPolygon[color=MainColor1,thick](A,B,C)
            \tkzDrawPoints(A,B,C)
        \end{tikzpicture}
    \end{center}
    \[ I = \int\limits_0^2 \d x \int\limits_x^{2x} 2xy \d y = \int\limits_0^2 x\Big[y^2\Big]_x^{2x} \d x = \int\limits_0^2 3x^3 \d x = \frac{3}{4} \cdot 16 = 12. \]
\end{solution}

\begin{example}
    Oblicz
    \[ \oint\limits_C 3x^2y^2 \d x + 2x^2(1 + xy) \d y, \]
    gdzie $C$ jest dodatnio zorientowanym okręgiem o średnicy $a$ i środku w punkcie $(\frac{a}{2}, 0)$.
\end{example}
\begin{solution}
    Na mocy twierdzenie Greena (\ref{t:Green}) mamy
    \begin{align*}
        I &= \oint\limits_C 3x^2y^2 \d x + 2x^2(1 + xy) \d y = \iint\limits_D \frac{\p{}}{\p x}(2x^2 + 2x^3y) - \frac{\p{}}{\p y}(3x^2y^2) \d x \d y = \\
        &= \iint\limits_D 4x + 6x^2y - 6x^2y \d x \d y = \iint\limits_D 4x \d x \d y,
    \end{align*}
    gdzie $D$ jest zadanym kołem. Możemy przejść z równaniem okręgu na współrzędne biegunowe otrzymując
    \[ \left(x - \frac{a}{2}\right)^2 + y^2 = \left(\frac{a}{2}\right)^2 \]
    \[ r^2\cos^2\varphi - ar\cos\varphi + \frac{a^2}{4} + r^2\sin^2\varphi = \frac{a^2}{4} \]
    \[ r^2 = ar\cos\varphi \]
    \[ r = a\cos\varphi, \]
    więc $D' = \left\{(r, \varphi) : \varphi \in \left[-\frac{\pi}{2}, \frac{\pi}{2}\right], r \in [0, a\cos\varphi]\right\}$. Ergo
    \begin{align*}
        I &= 4\iint\limits_D x \d x \d y = 4\iint\limits_{D'} r^2\cos\varphi \d r \d \varphi = 4\int\limits_{-\frac{\pi}{2}}^{\frac{\pi}{2}} \d \varphi \int\limits_0^{a\cos\varphi} r^2\cos\varphi \d r = \\
        &= \frac{4}{3}\int\limits_{-\frac{\pi}{2}}^{\frac{\pi}{2}} a^3\cos^4\varphi \d \varphi = \frac{4a^3}{3}\left(\left[\frac{1}{4}\sin\varphi \cos^3\varphi\right]_{-\frac{\pi}{2}}^{\frac{\pi}{2}} + \frac{3}{4}\int\limits_{-\frac{\pi}{2}}^{\frac{\pi}{2}} \cos^2 \varphi \d \varphi\right) = \\
        &= a^3 \int\limits_{-\frac{\pi}{2}}^{\frac{\pi}{2}} \cos^2 \varphi \d \varphi = a^3 \int_{-\frac{\pi}{2}}^{\frac{\pi}{2}} \left(\frac{1}{2}\cos 2\varphi + \frac{1}{2}\right) \d \varphi = \frac{a^3\pi}{2}.
    \end{align*}
\end{solution}

\begin{example}
    Oblicz
    \[ \int\limits_C (x + y)^2 \d x - (x - y)^2 \d y, \]
    gdzie $C$ to zorientowany ujemnie łuk sinusoidy $y = \sin x, x \in [0, \pi]$.
\end{example}
\begin{solution}
    Niech $P(x, y) = (x + y)^2, Q(x, y) = -(x - y)^2$. Możemy oczywiście skorzystać bezpośrednio z twierdzenia \ref{t:line integral}:
    \[ I = \int\limits_C (x + y)^2 \d x - (x - y)^2 \d y = \int\limits_0^\pi (x + \sin x)^2 - (x - \sin x)^2(\cos x) \d x, \]
    jednak nie będzie to najprostsze rachunkowo. Zamiast tego, możemy wziąć odcinek $L : y = 0, x \in [0, \pi]$ i stwierdzić, że
    \[ I = \oint\limits_{C \cup (-L)} P(x, y) \d x + Q(x, y) \d y - \int\limits_{-L} P(x, y) \d x + Q(x, y) \d y. \]
    \begin{center}
        \begin{tikzpicture}[scale=1.4,
            line/.style={postaction={decorate}, decoration={markings, mark=at position #1 with {\arrow{latex}}}},
            lineinv/.style={postaction={decorate}, decoration={markings, mark=at position #1 with {\arrow{latex reversed}}}}
            ]
            \tkzInit[xmin=-.3,ymin=-0.3,xmax={pi+.3},ymax=1.3]
            \tkzGrid \tkzDrawX \tkzDrawY
            \fill[MainColor1, opacity=0.2] (0,0) -- plot[domain=0:pi] (\x, {sin(deg(\x))}) -- (pi, 0) -- cycle;
            \draw[MainColor1,thick,line=0.5,domain=0:{pi}] plot (\x, {sin(deg(\x))});
            \draw[MainColor1,thick,lineinv=0.5,domain=0:{pi}] plot (\x, 0);
        \end{tikzpicture}
    \end{center}
    Stosując twierdzenie Greena (\ref{t:Green}) i fakt \ref{f:opposite orientation of a curve} mamy
    \begin{align*}
        I &= -\int\limits_0^\pi \d x \int\limits_0^{\sin x} \left(\frac{\p Q}{\p x}(x, y) - \frac{\p P}{\p x}(x, y)\right) \d y + \int\limits_L P(x, y) \d x + Q(x, y) \d y = \\
        &= -\int\limits_0^\pi \d x \int\limits_0^{\sin x} -(2x - 2y) - (2x + 2y) \d y + \int\limits_0^\pi x^2 \cdot 1 + (-x^2) \cdot 0 \d x = \\
        &= \int\limits_0^\pi \d x \int\limits_0^{\sin x} 4x \d y + \int\limits_0^\pi x^2 \d x = \int\limits_0^\pi 4x\sin x \d x + \frac{\pi^3}{3} = \\
        &= 4\left(\Big[-x\cos x\Big]_0^\pi + \int_0^\pi \cos x \d x\right) + \frac{\pi^3}{3} = 4\pi + \frac{\pi^3}{3}.
    \end{align*}
\end{solution}

\begin{remark}
    Zazwyczaj całek krzywoliniowych skierowanych nie liczy się najprzyjemniej (Czytelnik raczy sprawdzić chociażby ostatnie dwa przykłady), dlatego wolimy przejść na całkę podwójną, stosując twierdzenie Greena (\ref{t:Green}). Jednak zdarzają się również sytuacje, w których to przejście z całki podwójnej na krzywoliniową jest dobrym rozwiązaniem.

    Weźmy konkretny problem: chcemy znaleźć pole pod łukiem cykloidy
    \[ x(t) = t - \sin t, \quad y(t) = 1 - \cos t. \]
    Możemy oczywiście skorzystać ze wzoru na pole pod wykresem funkcji zadanej parametrycznie, ale zakładamy, że go nie znamy. Weźmy pole wektorowe $\vec{F} : \vec{F}(x, y) = (-y, 0)$. Łatwo sprawdzić, że $\frac{\p Q}{\p x} - \frac{\p P}{\p y} = 0 + 1 = 1$. Możemy więc użyć twierdzenie Greena w przeciwną stronę niż zazwyczaj:
    \[ \iint\limits_D 1 \d x \d y = -\oint\limits_{\p D} -y \d x = -\int\limits_0^{2\pi} -(1 - \cos t)(1 - \cos t) \d t = \int\limits_0^{2\pi} (1 - \cos t)^2 \d t = 3\pi a^3.\]

    Aby policzyć pole figury często możemy skorzystać z pól wektorowych $(0, x)$, $(-y, 0)$, $\left(\frac{-y}{2}, \frac{x}{2}\right)$. Rotacja (czyli różnica, którą liczyliśmy) każdego z nich jest równa $1$, więc idealnie nadają się do tego celu. Używając tego ostatniego pola wektorowego łatwo pokazać, że
    \begin{equation}
        \text{pole } R = \frac{1}{2}\oint\limits_{\p R} -y \d x + x \d y,
    \end{equation}
    gdzie $\p R$ to dodatnio zorientowany brzeg ograniczonego obszaru jednospójnego $R$.
\end{remark}

\begin{definition}
    Pole potencjalne $\vec{F} = (P, Q)$ w obszarze $D$ to takie pole wektorowe, że istnieje funkcja różniczkowalna $u : D \to \RR$, że
    \[ \d u = P(x, y) \d x + Q(x, y) \d y, \]
    czyli $P, Q$ są jej pochodnymi cząstkowymi. Funkcję $u$ nazywamy potencjałem pola potencjalnego $\vec{F}$.
\end{definition}

\begin{theorem}[warunek konieczny i wystarczający na potencjalność pola]
    \label{t:necessary and sufficient condition for field potentiality}
    Niech $\vec{F} = (P, Q)$ będzie polem wektorowym, a funkcje $P, Q$ są różniczkowalne w sposób ciągły na obszarze jednospójnym $D$. Pole $\vec{F}$ jest potencjalne wtedy i tylko wtedy, gdy dla każdego punktu $(x, y) \in D$ zachodzi
    \[ \frac{\p Q}{\p x}(x, y) = \frac{\p P}{\p y}(x, y). \]
\end{theorem}

\begin{corollary}
    Całka krzywoliniowa skierowana po dowolnej krzywej regularnej zamkniętej zawartej w obszarze $D$, na którym pole wektorowe jest potencjalne, jest równa $0$.
\end{corollary}

Możemy sformułować również ogólniejsze twierdzenie:
\begin{theorem}[o niezależności całki krzywoliniowej od kształtu krzywej w polu potencjalnym]
    \label{t:independence of path in a conservative vector field}
    Całka krzywoliniowa skierowana w polu potencjalnym nie zależy od kształtu krzywej regularnej $K \subset D$, a jedynie od jej początku $A$ i końca $B$. Ponadto zachodzi równość
    \[ \int\limits_{A}^B P(x, y) \d x + Q(x, y) \d y = u(B) - u(A), \]
    gdzie $u$ jest potencjałem pola potencjalnego w $D$.
\end{theorem}

\begin{example}
    Oblicz całkę krzywoliniową skierowaną pola wektorowego $\vec{F} = \left(\frac{y}{x^2 + y^2}, \frac{-x}{x^2 + y^2}\right)$ po okręgu $x^2 + y^2 = 1$ skierowanym dodatnio.
\end{example}
\begin{solution}
    Niech $P(x, y) = \frac{y}{x^2 + y^2}$, $Q(x, y) = \frac{-x}{x^2 + y^2}$. Funkcje te są różniczkowalne w sposób ciągły na pewnym zbiorze $D$, jednak $(0, 0) \notin D$, więc nie jest to obszar jednospójny. Nie możemy więc użyć warunku wystarczającego na potencjalność pola (\ref{t:necessary and sufficient condition for field potentiality}) i~tym samym powiedzieć, że całka wynosi zero.

    Zamiast tego wykorzystamy przejście na współrzędne biegunowe:
    \begin{align*}
        &\oint\limits_K P(x, y) \d x + Q(x, y) \d y = \int\limits_0^{2\pi}\left( \frac{\sin t}{1} (-\sin t \d t) + \frac{-\cos t}{1} (\cos t \d t)\right) = \\
        &= \int\limits_0^{2\pi}\left(-\sin^2 t + -\cos^2 t \right) \d t = \int\limits_0^{2\pi} -1 \d t = -2 \pi.
    \end{align*}
\end{solution}

\begin{example}
    Oblicz
    \[ \int\limits_\sC 2x^3y^4 + x \d x + 2x^4y^3 + y \d y, \]
    gdzie $\sC$ jest fragmentem paraboli $y(x) = x^2 + 3x - 4, x \in [-3, 2]$.
\end{example}
\begin{solution}
    Niech $\vec{F} = (P, Q)$, gdzie $P(x, y) = 2x^3y^4 + x, Q(x, y) = 2x^4y^3 + y$, będzie polem wektorowym. Możemy sprawdzić, że pochodne cząstkowe $P, Q$ istnieją i są ciągłe na $\RR^2$ oraz
    \begin{align*}
        \frac{\p Q}{\p x}(x, y) &= 6x^3y^3 \\
        \frac{\p P}{\p y}(x, y) &= 6x^3y^3
    \end{align*}
    są równe, więc pole $\vec{F}$ jest potencjalne. Na mocy twierdzenia \ref{t:independence of path in a conservative vector field}
    \[ \int\limits_\sC P(x, y) \d x + Q(x, y) \d y = \int\limits_{AB} P(x, y) \d x + Q(x, y) \d y, \]
    gdzie $A$ i $B$ to początek i koniec krzywej $\sC$,
    \[ A = (-3, -4), \qquad B = (2, 6). \]
    Moglibyśmy teraz policzyć całkę po odcinku, ale zamiast tego możemy znaleźć potencjał $u$ pola $\vec{F}$:
    \[ u = \int P(x, y) \d x = \int Q(x, y) \d y. \]
    Skupmy się na funkcji $Q$:
    \[ u = \int Q(x, y) \d y = \int 2x^4y^3 + y \d y = \frac{1}{2}x^4y^4 + \frac{1}{2}y^2 + C(x). \]
    Musimy teraz jeszcze znaleźć stałą (w stosunku do $y$) $C(x)$. Aby to zrobić, możemy policzyć całkę $\int P(x, t) \d x$, ale w ogólności łatwiejszą operacją będzie różniczkowanie:
    \[ \frac{\p u}{\p x}(x, y) = P(x, y) \]
    \[ \implies C'(x) = x  \implies C(x) = \frac{1}{2}x^2 + c. \]
    Mamy
    \[ u(x, y) = \frac{1}{2}\left(x^4y^4 + y^2 + x^2\right) + c, \]
    więc
    \[ \int\limits_{AB} 2x^3y^4 + x \d x + 2x^4y^3 + y \d y = u(B) - u(A) = 15. \]
\end{solution}